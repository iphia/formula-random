<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>공식 랜덤 암기</title>
  <meta name="app-version" content="v1.0.5" />
  <link rel="stylesheet" href="style.css">
  <link rel="apple-touch-icon" href="red-apple-touch-icon.png">

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
</head>
<body>
  <header class="topbar" id="topbar">
    <button class="topbtn left" id="btnUnlearned" type="button">
      미암기 <span class="badge" id="unlearnedCount">0</span>
    </button>

    <button class="topbtn center" id="btnExclude" type="button">
      이 공식 제외
    </button>

    <button class="topbtn right" id="btnExcluded" type="button">
      다시보기 <span class="badge" id="excludedCount">0</span>
    </button>
  </header>

  <main class="stage" id="stage">
    <div class="hint">화면을 누르면 다음 공식</div>
    <div id="formulaBox" class="formulaBox"></div>
    <div class="filename" id="filename"></div>
  </main>

  <!-- 패널: 미암기 -->
  <aside class="panel left" id="panelUnlearned" aria-hidden="true">
    <div class="panelHeader">
      <div class="panelTitle">미암기 목록 (탭=보기 / 길게=삭제)</div>
      <button class="closeBtn" id="closeUnlearned" type="button">닫기</button>
    </div>
    <div class="grid" id="gridUnlearned"></div>
    <div class="panelFooter" id="panelFooter"></div>
  </aside>

  <!-- 패널: 제외 -->
  <aside class="panel right" id="panelExcluded" aria-hidden="true">
    <div class="panelHeader">
      <div class="panelTitle">제외 목록 (탭=포함 / 길게=삭제)</div>
      <button class="closeBtn" id="closeExcluded" type="button">닫기</button>
    </div>
    <div class="grid" id="gridExcluded"></div>
  </aside>

  <!-- 우하단 메뉴 버튼 -->
  <button class="fab" id="fab" aria-label="메뉴">+</button>

  <!-- 메뉴 시트 -->
  <div class="sheet" id="sheet" aria-hidden="true">
    <div class="sheetCard">
      <button class="sheetBtn" id="btnAdd">공식 추가</button>
      <button class="sheetBtn" id="btnBackup">백업(JSON 다운로드)</button>
      <label class="sheetBtn fileBtn">
        복원(JSON 업로드)
        <input id="fileRestore" type="file" accept="application/json" hidden>
      </label>
      <button class="sheetBtn danger" id="btnSheetClose">닫기</button>
    </div>
  </div>

  <!-- 추가 모달 -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTitle">공식 추가</div>

      <label class="field">
        <div class="fieldLabel">설명</div>
        <input id="inpDesc" type="text" placeholder="예: 유효전력" />
      </label>

      <label class="field">
        <div class="fieldLabel">LaTeX</div>
        <textarea id="inpTex" rows="4" placeholder="예: P = VI\cos\theta"></textarea>
      </label>

      <div class="modalBtns">
        <button class="topbtn" id="btnPreview" type="button">미리보기</button>
        <button class="topbtn center" id="btnSave" type="button">저장</button>
        <button class="topbtn" id="btnCancel" type="button">닫기</button>
      </div>

      <div class="preview" id="preview"></div>
    </div>
  </div>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
  <script defer src="app.js"></script>
</body>
</html>
